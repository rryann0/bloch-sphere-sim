<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bloch Sphere Simulator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header class="header">
      <h1>Bloch Sphere Simulator</h1>
      <button type="button" class="help-btn" id="help-btn" aria-label="Open guide">Help</button>
    </header>
    <main class="main">
      <div class="canvas-container" id="canvas-container">
        <canvas id="bloch-canvas"></canvas>
      </div>
      <aside class="controls">
        <section class="panel gate-panel">
          <h2>Quantum Gates</h2>
          <div class="button-grid" id="gate-buttons">
            <button type="button" class="gate-btn" data-gate="X" title="Pauli X (bit flip)">X</button>
            <button type="button" class="gate-btn" data-gate="Y" title="Pauli Y">Y</button>
            <button type="button" class="gate-btn" data-gate="Z" title="Pauli Z (phase flip)">Z</button>
            <button type="button" class="gate-btn" data-gate="H" title="Hadamard">H</button>
            <button type="button" class="gate-btn" data-gate="S" title="S (√Z)">S</button>
            <button type="button" class="gate-btn" data-gate="T" title="T (∜Z)">T</button>
          </div>
          <p class="gate-description" id="gate-description" aria-live="polite">Hover a gate for a short description.</p>
        </section>
        <section class="panel reset-panel">
          <h2>Reset</h2>
          <div class="button-row">
            <button type="button" class="reset-btn" id="reset-0" title="Reset to |0⟩">|0⟩</button>
            <button type="button" class="reset-btn" id="reset-1" title="Reset to |1⟩">|1⟩</button>
            <button type="button" class="undo-btn" id="undo-btn" title="Undo last gate or reset">Undo</button>
          </div>
        </section>
        <section class="panel readout-panel">
          <h2>State</h2>
          <div class="readout" id="state-readout">
            <div><span class="label">Bloch vector:</span> <code id="bloch-vec">(0, 0, 1)</code></div>
            <div><span class="label">θ:</span> <span id="theta-val">0</span> <span class="label">φ:</span> <span id="phi-val">0</span></div>
            <p class="axis-legend" aria-hidden="true">North pole = |0⟩, South pole = |1⟩ (Z axis)</p>
          </div>
        </section>
        <section class="panel guide-panel" id="guide">
          <details class="guide-details">
            <summary class="guide-summary">Guide</summary>
            <div class="guide-content">
              <ol class="guide-steps">
                <li><strong>What you see</strong> – The sphere is the Bloch sphere. The orange point is your qubit state. You start at |0⟩ (north pole).</li>
                <li><strong>Rotate</strong> – Drag the sphere to rotate the view. Scroll to zoom.</li>
                <li><strong>Gates</strong> – Each button applies a quantum gate (a rotation on the sphere). Try <button type="button" class="try-link" data-gate="H">Apply H</button>: the point moves to the equator (equal superposition of |0⟩ and |1⟩).</li>
                <li><strong>Reset</strong> – Use <button type="button" class="try-link" data-reset="0">|0⟩</button> or <button type="button" class="try-link" data-reset="1">|1⟩</button> to jump back to the north or south pole.</li>
                <li><strong>More gates</strong> – <strong>X</strong> flips |0⟩↔|1⟩. <strong>Z</strong> flips the phase. <strong>S</strong> and <strong>T</strong> rotate around the Z-axis by π/2 and π/4.</li>
              </ol>
            </div>
          </details>
        </section>
        <section class="panel challenges-panel" id="challenges-panel">
          <h2>Challenges</h2>
          <div class="challenges-list" id="challenges-list"></div>
        </section>
      </aside>
    </main>
  </div>
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
    }
  }
  </script>
  <script type="module" src="script.js"></script>
</body>
</html>
